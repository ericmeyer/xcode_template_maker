#! /usr/bin/ruby
$: << File.expand_path(File.join(File.dirname(__FILE__), "..", "lib"))
require "yaml_file_template"
require "file_template"
require "file_template_exporter"
require 'optparse'

options = {}
OptionParser.new do |opts|
  opts.banner = "Usage: generate [options]"

  opts.on("-y x", "--yaml", String, :REQUIRED, "YAML Configuration for template") do |yaml_path|
    options[:relative_yaml_path] = yaml_path
  end
end.parse!

yaml = File.read(options[:relative_yaml_path])
file_template = YAMLFileTemplate.load_from_yaml(yaml)
file_template_exporter = FileTemplateExporter.new(file_template)
puts file_template_exporter.to_xml
